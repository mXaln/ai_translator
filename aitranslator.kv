#:import utils kivy.utils
#:import Factory kivy.factory.Factory

<SpinnerOptions@SpinnerOption>:
    height: 60

<SpinnerDropdown@DropDown>:
    max_height: 700

<MainView>

    src_selected: src_dropdown.text
    target_selected: target_dropdown.text
    src_text: src_input.text

    src_dropdown: src_dropdown
    target_dropdown: target_dropdown

    BoxLayout:
        id: workspace
        orientation: "vertical"

        size: root.size
        pos: root.pos

        BoxLayout:
            id: center
            orientation: "horizontal"

            BoxLayout:
                id: left
                orientation: "vertical"

                Spinner:
                    id: src_dropdown
                    size_hint_y: None
                    text: root.src_selected
                    values: root.langs

                    background_normal: ""
                    background_color: 235/255, 66/255, 66/255

                    dropdown_cls: Factory.get("SpinnerDropdown")
                    option_cls: Factory.get("SpinnerOptions")

                TextInput:
                    id: src_input

            BoxLayout:
                id: right
                orientation: "vertical"

                Spinner:
                    id: target_dropdown
                    size_hint_y: None
                    text: root.target_selected
                    values: root.langs

                    background_normal: ""
                    background_color: 28/255, 153/255, 32/255

                    dropdown_cls: Factory.get("SpinnerDropdown")
                    option_cls: Factory.get("SpinnerOptions")

                TextInput:
                    text: root.target_text
                    readonly: True
                    font_name: "DejaVuSans"

        Button:
            id: translate

            text: "Translate"

            size_hint: None, None
            width: 400
            height: 80
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

            background_normal: ""
            background_color: utils.get_color_from_hex("#0442b5")

            on_release: root.translate()

    BlockingOverlay:
        id: overlay

        canvas.before:
            Color:
                rgba: 0, 0, 0, 0.9
            Rectangle:
                pos: self.pos
                size: self.size

        size: root.size
        opacity: root.overlay_opacity
        anchor_x: 'center'
        anchor_y: 'center'

        Label:
            text: root.overlay_text